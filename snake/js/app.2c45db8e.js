(function(e){function t(t){for(var r,u,a=t[0],c=t[1],s=t[2],f=0,h=[];f<a.length;f++)u=a[f],Object.prototype.hasOwnProperty.call(i,u)&&i[u]&&h.push(i[u][0]),i[u]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(h.length)h.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},i={app:0},o=[];function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"05e0":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("c068"));var i=n("a362");t.event=i.default;var o=n("56da");t.pipe=o.default},"423a":function(e,t,n){},"56da":function(e,t,n){"use strict";function r(){function e(){while(n.length>0&&r.length>0){for(var e=n.shift(),i=0;i<r.length;++i){var o=r[i].callback(e.value);void 0!==o&&(r[i].resolve(o),r.splice(i--,1))}e.resolve()}if(t)for(var u=0,a=r;u<a.length;u++){var c=a[u];c.resolve(void 0)}}var t=!1,n=[],r=[];return{close:function(){t=!0,e()},write:function(r){return new Promise((function(i,o){if(t)throw new Error("Writing to completed pipe");n.push({value:r,resolve:i}),e()}))},attach:function(n){return new Promise((function(i){if(t)return i(void 0);r.push({callback:n,resolve:i}),e()}))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},a362:function(e,t,n){"use strict";n.r(t);n("ac6a"),n("5df3"),n("4f7f"),n("ac4d"),n("8a81");var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function u(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):i(e.value).then(u,a)}c((r=r.apply(e,t||[])).next())}))},o=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(u)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};function u(){var e=new Set;return{event:u.make({listen:function(t){return e.add(t),function(){return e.delete(t)}}}),emit:function(t){for(var n=0,r=e;n<r.length;n++){var i=r[n];i(t)}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u,function(e){function t(e){return r(r({},e),{next:function(){var e=this;return new Promise((function(t){var n=e.listen((function(e){n(),t(e)}))}))},until:function(e){var t=this;return new Promise((function(n){var r=t.listen((function(u){return i(t,void 0,void 0,(function(){var t;return o(this,(function(i){switch(i.label){case 0:return[4,e(u)];case 1:return t=i.sent(),void 0!==t&&(r(),n(t)),[2]}}))}))}))}))}})}function n(e){return e}function u(t,n){var r=t,i=r.on||r.addEventListener,o=r.off||r.removeEventListener;return e.make({listen:function(e){return i.apply(r,[n,e]),function(){return o.apply(r,[n,e])}}})}function a(t){var n=e();return t.attach((function(e){n.emit(e)})),n.event}e.make=t,e.emitter=n,e.wrap=u,e.from_source=a}(u||(u={}))},b174:function(e,t,n){},c068:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},cd49:function(e,t,n){"use strict";n.r(t);n("ac4d"),n("8a81"),n("ac6a"),n("96cf");var r,i=n("3b8d"),o=n("b0b4"),u=n("308d"),a=n("6bb5"),c=n("013f"),s=n("4e2b"),l=n("d225"),f=(n("cadf"),n("551c"),n("f751"),n("097d"),n("fc76")),h=n.n(f),d=n("f773"),v=n("05e0"),p=n("2b0e"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[n("div",[n("div",[e.state.snake?n("div",{staticClass:"score"},[n("span",[e._v(e._s(e.state.snake.body.length))])]):e._e()]),n("canvas",{ref:"canvas",staticClass:"white"})])])},b=[],w=(n("7f7f"),{name:"snake",mounted:function(){this.initialize(this.$refs.canvas)},computed:{url:function(){return"".concat(location.href,"#").concat(this.state.name)}},methods:{copy:function(){var e=this.$refs.localName.$refs.input;e.select(),e.setSelectionRange(0,this.url.length),document.execCommand("copy")}}}),m=w,k=(n("daf1"),n("d6c4"),n("2877")),O=Object(k["a"])(m,y,b,!1,null,"51e681e8",null),x=O.exports,g=(location.hostname,new d["Vec"](50,40));(function(e){e[e["UP"]=0]="UP",e[e["DOWN"]=1]="DOWN",e[e["LEFT"]=2]="LEFT",e[e["RIGHT"]=3]="RIGHT"})(r||(r={})),function(e){function t(t){if(t==e.UP)return e.DOWN;if(t==e.DOWN)return e.UP;if(t==e.LEFT)return e.RIGHT;if(t==e.RIGHT)return e.LEFT;throw new Error("?")}function n(t){if(t==e.UP)return new d["Vec"](0,-1);if(t==e.DOWN)return new d["Vec"](0,1);if(t==e.LEFT)return new d["Vec"](-1,0);if(t==e.RIGHT)return new d["Vec"](1,0);throw new Error("?")}e.opposite=t,e.toVec=n}(r||(r={}));var j=function e(t,n){Object(l["a"])(this,e),this.body=[],this.body=t.slice(),this.direction=n},_=function(e){function t(e,n){var r;return Object(l["a"])(this,t),r=Object(u["a"])(this,Object(a["a"])(t).call(this,e,n)),r.queue=[],r.handle=r.handle.bind(Object(c["a"])(r)),window.addEventListener("keydown",r.handle),r}return Object(s["a"])(t,e),Object(o["a"])(t,[{key:"destroy",value:function(){window.removeEventListener("keydown",this.handle)}},{key:"handle",value:function(e){37==e.keyCode&&this.queue.push(r.LEFT),38==e.keyCode&&this.queue.push(r.UP),39==e.keyCode&&this.queue.push(r.RIGHT),40==e.keyCode&&this.queue.push(r.DOWN)}},{key:"input",value:function(){while(this.queue.length>0){var e=this.queue.shift();if(r.opposite(e)!=this.direction){this.direction=e;break}}return this.direction}}]),t}(j),P=function(){function e(t,n,r,i){Object(l["a"])(this,e),this.canvas=t,this.size=n,this.rand=r,this.local=i,this.counter=0,this.complete=Object(v["event"])(),this.food=d["Vec"].zero,this.make_food()}return Object(o["a"])(e,[{key:"make_food",value:function(){while(1){var e=this.rand.uint32()%this.size.x,t=this.rand.uint32()%this.size.y,n=new d["Vec"](e,t);if(!this.hit_test(n)){this.food=n;break}}}},{key:"hit_test",value:function(e){for(var t=0;t<this.local.body.length;++t)if(d["Vec"].equals(this.local.body[t],e))return[this.local,t];return null}},{key:"play",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.render(),e.next=3,this.complete.event.next();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"destroy",value:function(){this.counter=-1}},{key:"render",value:function(){var e=this;if(!(this.counter<0)){if(this.counter%2==0)++this.counter;else{++this.counter;var t=this.local.input();this.local.direction=t;var n=!1,i=!1,o=r.toVec(this.local.direction),u=d["Vec"].add(this.local.body[0],o);if(d["Vec"].equals(u,this.food)?n=!0:this.local.body.pop(),i=i||null!=this.hit_test(u)||u.x<0||u.x>=this.size.x||u.y<0||u.y>=this.size.y,o=r.toVec(this.local.direction),u=d["Vec"].add(this.local.body[0],o),this.local.body.unshift(u),i)return void this.complete.emit();n&&this.make_food();var a=function(t){e.canvas.fillStyle="black",e.canvas.fillRect(10*t.x,10*t.y,9,9)};this.canvas.clearRect(0,0,10*this.size.x,10*this.size.y),a(this.food);var c=!0,s=!1,l=void 0;try{for(var f,h=this.local.body[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var v=f.value;a(v)}}catch(p){s=!0,l=p}finally{try{c||null==h.return||h.return()}finally{if(s)throw l}}}requestAnimationFrame((function(){return e.render()}))}}}]),e}(),V={snake:null};function T(e){var t=h()(),n=null;function i(){var i=new _([new d["Vec"](5,5),new d["Vec"](4,5),new d["Vec"](3,5),new d["Vec"](2,5),new d["Vec"](1,5)],r.RIGHT);n=new P(e,g,t,i),n.play(),V.snake=i}window.addEventListener("keydown",(function(e){82==e.keyCode&&(n.local.destroy(),n.destroy(),i())})),i()}function E(e){var t=e.getContext("2d");e.width=10*g.x-1,e.height=10*g.y-1,e.style.width=e.width+"px",e.style.height=e.height+"px",T(t)}p["a"].config.productionTip=!1;var R=new p["a"]({mixins:[x],data:{state:V},methods:{initialize:function(e){E(e)}}});R.$mount("#app")},d6c4:function(e,t,n){"use strict";var r=n("b174"),i=n.n(r);i.a},daf1:function(e,t,n){"use strict";var r=n("423a"),i=n.n(r);i.a},f773:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.x=e,this.y=t}return e.add=function(t,n){return new e(t.x+n.x,t.y+n.y)},e.scale=function(t,n){return new e(t.x*n,t.y*n)},e.equals=function(e,t){return e.x==t.x&&e.y==t.y},e.zero=new e(0,0),e}();t.Vec=r}});
//# sourceMappingURL=app.2c45db8e.js.map